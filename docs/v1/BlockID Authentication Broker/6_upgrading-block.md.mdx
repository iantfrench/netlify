---
slug: /v1/upgrading-blockid-authentication-broker
id: Z3ecf8e77-a029-4bfe-96d4-999e92d1484a
---
# Upgrading BlockID Authentication Broker
This document is to upgrade your 1Kosmos BlockID Authentication Brokers to the latest version. In order to ensure this is seamless, download the latest broker, and perform the following steps for the upgrade. The following steps will assist you in manually installing the broker for LDAP/AD connectivity.

:::(Warning) (Note:)
The expected duration of the activity is approximately 20-30 minutes.
:::

### Linux Virtual Machine (VM) Server Requirements

1. OS - Linux (supports only Linux), RHEL 7 and above
2. JAVA: 
    * OpenJDK versions supported - 13, 14
    * Oracle JDK - 11 (11.0.1 not supported), 12, 13
3. RAM - 2 GB (Minimum)
4. Two Virtual CPUs
5. Port for you broker interface
6. Web proxy should allow outbound WebSocket connections

### Steps to be performed:
1.	Log in to the **Linux** machine with the userid that was used for the broker installation.
2.	Before you begin, ensure that the broker you are trying to upgrade is stopped. To stop the BlockID Authentication broker:
    * Run the `./stopClient.bsh` command.
3.	Please take a backup of the entire broker folder within the server. Our standard installation instructions ask for the broker to be installed within the
`/opt/1kosmos/broker` directory.
4.	Download and copy the BlockID Authentication Broker Installation **.zip** file to the **Linux** machine from the location provided to you.
5.	Unzip the BlockID Authentication Broker Installation file within a designated folder on the Linux server. You will be prompted to choose which files to replace. 
    * Select **YES** for all files other than `default.yml`. 
    * If you have made changes to the **start** or **stop** scripts, select **NO** for those prompts.
6.	Start the BlockID Authentication broker:
    * Run ` ./startClient.bsh -consoleDns <tenantname> -community <communityname> -licenseKey <licensekey> -tenantTag <tag> -p <port> -t <time-in-seconds> ` command.
7.	Navigate to the logs folder and tail the latest broker log:
    * Run `tail -f logs/default_<dateandtime>.log` command.
8. Repeat the steps across all of your brokers.

### Test the broker connection

 1. Login to the BlockID Admin Console as an administrator.
    * Navigate to ***Administration Console > Auth Configuration > Authentication Modules***.
    * From the Enabled Authentication Modules section, click on **Authentication Broker**.
2. Check and confirm the indicator in green next to the newly upgraded broker.
3. Log out from the BlockID Admin Console and log in again as a regular user. The **My Profile** screen is displayed for the user.
